<h3>Education Update</h3>
<hr />
<form [formGroup]="educationForm" (ngSubmit)="onUpdate()">
  <mat-form-field appearance="fill">
    <mat-label>Type</mat-label>
    <mat-select
      formControlName="type"
      (change)="educationForm.patchValue({ level: null })"
    >
      <mat-option value="null" [disabled]="true"
        >Select a type education</mat-option
      >
      <mat-option *ngFor="let type of types" [value]="type">{{
        type
      }}</mat-option>
    </mat-select>
    <mat-error
      *ngIf="
        educationForm.get('type')?.errors &&
        (educationForm.get('type')!.dirty || educationForm.get('type')!.touched)
      "
    >
      <div *ngIf="educationForm.get('type')?.errors?.required">
        type is required
      </div>
    </mat-error>
  </mat-form-field>
  <mat-form-field
    appearance="fill"
    *ngIf="educationForm.get('type')!.value !== null"
  >
    <mat-label>Level</mat-label>
    <mat-select
      formControlName="level"
      *ngIf="educationForm.get('type')?.value === EducationType.TRAINING"
    >
      <mat-option value="null" [disabled]="true"
        >Select a type education</mat-option
      >
      <mat-option *ngFor="let level of training" [value]="level">
        {{ level }}
      </mat-option>
    </mat-select>
    <mat-select
      formControlName="level"
      *ngIf="educationForm.get('type')?.value === EducationType.UNIVERSITY"
    >
      <mat-option value="null" [disabled]="true"
        >Select a type education</mat-option
      >
      <mat-option *ngFor="let level of university" [value]="level">
        {{ level }}
      </mat-option>
    </mat-select>
    <mat-error
      *ngIf="
        educationForm.get('level')?.errors &&
        (educationForm.get('level')!.dirty ||
          educationForm.get('level')!.touched)
      "
    >
      <div *ngIf="educationForm.get('level')?.errors?.required">
        level is required
      </div>
    </mat-error>
  </mat-form-field>
  <div *ngIf="educationForm.get('type')!.value !== null">
    <mat-form-field appearance="fill">
      <mat-label>Name</mat-label>
      <input matInput type="text" formControlName="name" />
      <mat-error
        *ngIf="
          educationForm.get('name')?.errors &&
          (educationForm.get('name')!.dirty ||
            educationForm.get('name')!.touched)
        "
      >
        <div *ngIf="educationForm.get('name')?.errors?.required">
          name is required
        </div>
        <div *ngIf="educationForm.get('name')?.errors?.minlength">
          name is too short
        </div>
        <div *ngIf="educationForm.get('name')?.errors?.maxlength">
          name is too long
        </div>
      </mat-error>
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>School</mat-label>
      <input matInput type="text" formControlName="school" />
      <mat-error
        *ngIf="
          educationForm.get('school')?.errors &&
          (educationForm.get('school')!.dirty ||
            educationForm.get('school')!.touched)
        "
      >
        <div *ngIf="educationForm.get('school')?.errors?.required">
          school is required
        </div>
        <div *ngIf="educationForm.get('school')?.errors?.minlength">
          school is too short
        </div>
        <div *ngIf="educationForm.get('school')?.errors?.maxlength">
          school is too long
        </div>
      </mat-error>
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Finish date</mat-label>
      <input matInput [matDatepicker]="picker" formControlName="finishDate" />
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>
  </div>

  <button
    mat-raised-button
    color="primary"
    type="submit"
    [disabled]="!educationForm.valid"
  >
    Update
  </button>
  <button mat-raised-button [routerLink]="['/profile']">Cancel</button>
</form>
